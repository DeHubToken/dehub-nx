<ng-container *rxLet="productDetail$ as productDetail">
  <div
    [dhbContentfulDraft]="productDetail.sys"
    class="card image-card shadow-8 mx-4 bg-gradient-2 pb-5 overflow-hidden"
  >
    <!-- Main Picture -->
    <swiper-container dhbSwiper [swiperOptions]="swiperOptions" init="false">
      <swiper-slide
        *ngFor="let picture of productDetail.picturesCollection?.items ?? []"
      >
        <img
          *ngIf="picture"
          [dhbContentfulDraft]="picture.sys"
          [src]="picture.url"
          [alt]="picture.title"
        />
      </swiper-slide>
    </swiper-container>

    <div class="image-content px-4 xl:px-8">
      <!-- Title -->
      <h2 class="border-bottom-2 pb-1 mb-5">
        {{ productDetail.name || '' }}
      </h2>

      <!-- Body -->
      <div
        class="flex flex-wrap sm:flex-nowrap justify-content-end align-items-start"
      >
        <div
          [innerHtml]="
            productDetail.fullDescription?.json
              | dhbContentfulRichMarkup
              | dhbSafeHtml
          "
          class="flex-grow pr-3 mb-4 line-height-3"
        ></div>

        <div class="min-w-full sm:min-w-max">
          <!-- Meta Info -->
          <div
            *ngIf="productDetail.category as category"
            class="card overview-box gray shadow-2 pt-1 pb-3 mb-3"
          >
            <div class="overview-info text-center w-full">
              <h6 class="pt-3 pb-2 pr-0 mb-0">
                <i [class]="category.icon + ' text-xl pr-2'"></i>
                {{ category.name || '' }}
              </h6>
            </div>
          </div>

          <!-- Info Widget -->
          <dhb-product-info [productDetail]="productDetail"/>

          <!-- Sales Widget -->
          <dhb-product-sales [productSales$]="productSales$"/>

          <!-- Orders Widget -->
          <dhb-product-orders [productOrders$]="productOrders$"/>
        </div>
      </div>
    </div>
  </div>
</ng-container>
