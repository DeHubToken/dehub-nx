<div [dhbContentfulDraft]="product.sys">
  <p-card
    *ngIf="product"
    [header]="product.name ?? ''"
    styleClass="product p-card-shadow h-full"
  >
    <!-- Header -->
    <ng-template pTemplate="header">
      <swiper-container dhbSwiper [swiperOptions]="swiperOptions" init="false">
        <swiper-slide
          *ngFor="let picture of product.picturesCollection?.items ?? []"
        >
          <img
            *ngIf="picture"
            [dhbContentfulDraft]="picture.sys"
            [src]="picture.url"
            [alt]="picture.title"
          />
        </swiper-slide>
      </swiper-container>
    </ng-template>

    <!-- Body -->
    <div
      class="flex flex-wrap sm:flex-nowrap justify-content-end align-items-start"
    >
      <div class="flex-grow-1 pr-3 mb-4">
        <p>
          {{ product.shortDescription }}
        </p>
      </div>

      <div class="min-w-full sm:min-w-max">
        <!-- Info Widget -->
        <dhb-product-info [productDetail]="product" />
      </div>
    </div>

    <!-- Footer -->
    <ng-template pTemplate="footer">
      <div class="flex justify-content-end">
        <!-- Details -->
        <p-button
          [routerLink]="['/shop', product.slug]"
          label="Details"
          class="w-6 md:w-auto"
          styleClass="p-button-secondary p-button-lg w-full"
        />

        <!-- Buy -->
        <p-button
          *ngIf="product.availableQuantity ?? 0 > 0"
          [routerLink]="
            product.pause
              ? null
              : [{ outlets: { modal: ['checkout', product.slug] } }]
          "
          [label]="product.pause ? 'Coming Soon' : 'Buy'"
          [disabled]="product.pause ?? false"
          styleClass="p-button-primary p-button-lg ml-2"
          class="w-6 md:w-auto"
        />
      </div>
    </ng-template>
  </p-card>
</div>
